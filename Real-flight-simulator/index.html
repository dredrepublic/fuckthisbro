<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Simulator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="loading">
        <div class="loading-content">
            <h1>FLIGHT SIMULATOR</h1>
            <p>Initializing systems...</p>
            <div class="loading-bar">
                <div class="loading-fill"></div>
            </div>
        </div>
    </div>

    <canvas id="canvas"></canvas>

    <div id="hud">
        <div class="hud-panel hud-left">
            <div class="instrument">
                <div class="instrument-label">AIRSPEED</div>
                <div class="instrument-value" id="airspeed">0</div>
                <div class="instrument-unit">KTS</div>
            </div>
        </div>

        <div class="hud-panel hud-left-bottom">
            <div class="instrument">
                <div class="instrument-label">ALTITUDE</div>
                <div class="instrument-value" id="altitude">0</div>
                <div class="instrument-unit">FT</div>
            </div>
            <div class="instrument">
                <div class="instrument-label">V/S</div>
                <div class="instrument-value" id="vspeed">0</div>
                <div class="instrument-unit">FPM</div>
            </div>
        </div>

        <div class="hud-panel hud-right">
            <div class="instrument">
                <div class="instrument-label">THROTTLE</div>
                <div class="throttle-bar">
                    <div class="throttle-fill" id="throttle-fill"></div>
                </div>
                <div class="instrument-value" id="throttle-val">0</div>
                <div class="instrument-unit">%</div>
            </div>
            <div class="instrument">
                <div class="instrument-label">HEADING</div>
                <div class="instrument-value" id="heading">000</div>
                <div class="instrument-unit">&deg;</div>
            </div>
        </div>

        <div class="hud-center">
            <canvas id="attitude-canvas" width="180" height="180"></canvas>
        </div>

        <!-- Crosshair -->
        <div id="crosshair">
            <div class="ch-h"></div>
            <div class="ch-v"></div>
            <div class="ch-dot"></div>
        </div>

        <!-- Weapon panel -->
        <div class="hud-weapon" id="weapon-panel">
            <div class="weapon-name" id="weapon-name">BOMBS</div>
            <div class="weapon-ammo">x<span id="weapon-ammo">20</span></div>
            <div class="weapon-hint">` swap &middot; click fire</div>
        </div>

        <!-- Score -->
        <div class="hud-score" id="score-display">TARGETS: 0 / 30</div>

        <!-- Multiplayer player list -->
        <div class="hud-players" id="player-list" style="display:none">
            <div class="player-list-title">PLAYERS</div>
            <div id="player-list-items"></div>
        </div>

        <!-- Lock indicator (positioned by JS) -->
        <div id="lock-indicator">&#9674; LOCK</div>

        <!-- Lock-on mini-game overlay -->
        <div id="lockon-minigame" style="display:none">
            <canvas id="lockon-canvas" width="200" height="200"></canvas>
            <div class="lockon-label">ACQUIRING LOCK</div>
            <div class="lockon-progress-bar">
                <div class="lockon-progress-fill" id="lockon-fill"></div>
            </div>
        </div>

        <div class="hud-bottom">
            <div class="status-item" id="gear-status">GEAR ▼ DOWN</div>
            <div class="status-item" id="brake-status">BRK OFF</div>
            <div class="status-item" id="nitro-status">NITRO [N] READY</div>
            <div class="status-item" id="stall-warning">⚠ STALL</div>
        </div>

        <div class="hud-top">
            <div class="controls-help">
                S/W: Pitch &middot; A/D: Yaw &middot; Q/E: Roll &middot; SHIFT/U: Throttle &middot; M: Gear &middot; B:
                Brake &middot; N: Nitro &middot; Click: Fire &middot; `: Swap (Bombs/Missiles/Gun)
            </div>
        </div>
    </div>

    <!-- Multiplayer lobby -->
    <div id="mp-lobby">
        <div class="lobby-content">
            <h1 class="lobby-title">MULTIPLAYER</h1>
            <div class="lobby-buttons">
                <button id="btn-host" class="lobby-btn">HOST GAME</button>
                <button id="btn-solo" class="lobby-btn lobby-btn-secondary">PLAY SOLO</button>
            </div>
            <div id="host-panel" style="display:none">
                <div class="room-code-label">ROOM CODE</div>
                <div class="room-code" id="room-code">----</div>
                <div class="lobby-status" id="host-status">Waiting for players...</div>
                <div id="lobby-players"></div>
                <button id="btn-start" class="lobby-btn">START GAME</button>
            </div>
            <div id="join-panel" style="display:none">
                <input id="join-code" class="lobby-input" placeholder="ENTER CODE" maxlength="4" autocomplete="off">
                <button id="btn-join" class="lobby-btn">JOIN</button>
                <div class="lobby-status" id="join-status"></div>
            </div>
            <div class="lobby-or">— or —</div>
            <button id="btn-show-join" class="lobby-btn lobby-btn-secondary">JOIN GAME</button>
        </div>
    </div>

    <!-- Death overlay -->
    <div id="death-overlay">
        <div class="death-content">
            <h2>CRASHED</h2>
            <p>Restarting in <span id="death-timer">3</span>...</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script src="main.js"></script>
</body>

</html>